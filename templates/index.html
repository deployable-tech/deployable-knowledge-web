<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>DKClient Demo — bare metal</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" href="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///ywAAAAAAQABAAACAUwAOw==">

  <link rel="stylesheet" href="/static/ui/css/style.css" />
</head>
<body>
  <header>
    <strong>DKClient Demo</strong>
    <span class="pill">browser only</span>
    <input id="base" size="42" />
    <button id="init">Init SDK</button>
    <button id="prime">Prime User Session</button>
    <button id="ensure">Ensure Session</button>
    <span id="sid" class="mono subtle"></span>
  </header>

  <main>
    <div style="display:flex; flex-direction:column; gap:16px;">
      <section>
        <h2>LLM Service & Model</h2>
        <div class="row">
          <button id="loadServices">Load Services</button>
          <button id="refreshSelection">Get Selection</button>
        </div>
        <div class="row">
          <label style="min-width:80px;">Service</label>
          <select id="svc"></select>
        </div>
        <div class="row">
          <label style="min-width:80px;">Model</label>
          <select id="model"></select>
        </div>
        <div class="row">
          <button id="setSelection">Update Selection</button>
        </div>
        <div id="serviceLst"></div>
        <pre id="selOut" class="mono" style="max-height:180px;"></pre>
      </section>

      <section>
        <h2>Search</h2>
        <div class="row">
          <input id="q" placeholder="query…" />
          <input id="topK" type="number" value="5" style="max-width:80px;" />
          <button id="doSearch">Run</button>
        </div>
        <pre id="searchOut" class="mono" style="max-height:220px;"></pre>
      </section>

      <section>
        <h2>Documents & Segments</h2>
        <div class="row">
          <button id="listDocs">List Documents</button>
          <span id="docCount" class="subtle"></span>
        </div>
        <div id="docs" class="list"></div>
        <div class="spacer"></div>
        <div class="row">
          <label style="min-width:80px;">Segments of</label>
          <input id="segSource" placeholder="source.txt (auto-fills on click)" />
          <button id="listSegs">List Segments</button>
        </div>
        <div id="segs" class="list"></div>
        <pre id="segView" class="mono" style="max-height:160px;"></pre>
      </section>
    </div>

    <div style="display:flex; flex-direction:column; gap:16px;">
      <section>
        <h2>Chat</h2>
        <div class="grid-2">
          <div>
            <label>Persona</label>
            <input id="persona" placeholder="optional persona tag" />
          </div>
          <div>
            <label>Template ID</label>
            <input id="templateId" value="rag_chat" />
          </div>
        </div>
        <div class="grid-2">
          <div>
            <label>Top K</label>
            <input id="chatTopK" type="number" value="8" />
          </div>
          <div>
            <label>Inactive (JSON array of object_ids)</label>
            <input id="inactive" placeholder='["obj_1","obj_2"]' />
          </div>
        </div>
        <label>Message</label>
        <textarea id="msg" placeholder="Ask your system something grounded…"></textarea>
        <div class="row">
          <button id="send">Send (JSON)</button>
          <button id="stream">Stream (SSE)</button>
          <span id="meta" class="subtle mono"></span>
        </div>
        <pre id="chatOut" class="mono" style="min-height:140px;"></pre>
      </section>

      <section>
        <h2>Ingest</h2>
        <div class="row">
          <input id="files" type="file" multiple />
          <button id="upload">Upload</button>
          <button id="ingestAll">Ingest All</button>
        </div>
        <div class="row">
          <input id="removeSource" placeholder="source name to remove…" />
          <button id="remove">Remove Source</button>
          <button id="clearDb">Clear DB</button>
        </div>
        <pre id="ingOut" class="mono" style="max-height:160px;"></pre>
      </section>

      <section>
        <h2>Templates & Settings</h2>
        <div class="row">
          <button id="tplList">List Templates</button>
          <input id="tplId" placeholder="template id…" />
          <button id="tplGet">Get</button>
        </div>
        <div class="row">
          <input id="userId" value="local-user" />
          <button id="getSettings">Get Settings</button>
        </div>
        <pre id="miscOut" class="mono" style="max-height:200px;"></pre>
      </section>
    </div>
<div id="serviceCards"></div>
<div id="modelCards"></div>

</main>

  <footer>
    If your API runs on a different port, change the base URL. Cookie priming uses <code>/begin</code>.
  </footer>

  <div id="mount"></div>

  <script type="module" src="/static/app/js/main.js"></script>

</body>
</html>
